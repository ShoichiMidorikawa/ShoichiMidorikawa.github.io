#-------------------------------------------------------------------------------
# gnuplotの設定
#-------------------------------------------------------------------------------
reset
set nokey                 # 凡例の非表示

set terminal gif animate optimize delay 30 size 1200, 600

set output "weierstrass.gif"  # 出力ファイル名の設定

#-------------------------------------------------------------------------------
# ループ処理
#-------------------------------------------------------------------------------

if(exist("n")==0 || n<0) n = 0  # ループ変数の初期化

#-------------------------------------------------------------------------------
# プロット
#-------------------------------------------------------------------------------
#set parametric
set size ratio 0.5

while(n<=100){
title(n) = sprintf("t = %d",n)  #タイトル名
unset label 
set label title(n)  font 'Times,20'  at -1.5 , 1.7 

set xrange[-2:2]
set yrange[-2:2.5]
set samples 2048
a=0.5
b=5
if(n<=80){
f(x, n) = sum[k=0:80] a**k*cos(b**k*pi*x)*n**k/80**k
}else{
f(x, n) = sum[k=0:n] a**k*cos(b**k*pi*x)
}

plot f(x, n)



#-------------------------------------------------------------------------------
# ループ処理
#-------------------------------------------------------------------------------pause
n = n + 1        # ループ変数の増加
}

set output
